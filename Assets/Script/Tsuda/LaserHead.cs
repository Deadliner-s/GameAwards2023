using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class LaserHead : MonoBehaviour
{
    public float speed = 5f;  // 移動速度
    public GameObject otherObject;  // 生成するプレハブオブジェクト
    public float lifetime = 5f;  // オブジェクトの寿命（秒）

    private Vector3 targetScreenPosition;  // 目標スクリーン座標
    private Vector3 targetWorldPosition;  // 目標ワールド座標
    private Camera mainCamera;  // メインカメラ
    private float timer;  // タイマー

    void Start()
    {
        mainCamera = Camera.main;  // メインカメラを取得する

        targetScreenPosition.x = Random.Range(0.0f, 1620.0f);  // 0〜1920のランダムな数値
        targetScreenPosition.y = Random.Range(0.0f, 980.0f);  // 0〜1080のランダムな数値
        targetScreenPosition.z = 2.0f;
        targetWorldPosition = mainCamera.ScreenToWorldPoint(targetScreenPosition);  // 目標スクリーン座標をワールド座標に変換する

        transform.LookAt(targetWorldPosition);  // 目標座標の方向を向く

        GameObject newObj = Instantiate(otherObject, targetWorldPosition, transform.rotation) as GameObject;  // 警告UIの生成

        timer = lifetime;  // タイマーを設定する
    }

    void Update()
    {
        timer -= Time.deltaTime;  // タイマーを減算する

        if (timer <= lifetime - 7.0f)
        {
            transform.position += transform.forward * speed * Time.deltaTime;  // 目標座標の方向に移動する
        }
     
        if (timer <= 0)
        {
            Destroy(gameObject);  // オブジェクトを削除する
        }
    }
}

